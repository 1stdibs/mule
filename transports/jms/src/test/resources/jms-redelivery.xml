<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesource.org/schema/mule/core/2.2"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:jms="http://www.mulesource.org/schema/mule/jms/2.2"
      xmlns:test="http://www.mulesource.org/schema/mule/test/2.2"
      xsi:schemaLocation="
       http://www.mulesource.org/schema/mule/core/2.2 http://www.mulesource.org/schema/mule/core/2.2/mule.xsd
       http://www.mulesource.org/schema/mule/test/2.2 http://www.mulesource.org/schema/mule/test/2.2/mule-test.xsd
       http://www.mulesource.org/schema/mule/jms/2.2 http://www.mulesource.org/schema/mule/jms/2.2/mule-jms.xsd">

    <jms:activemq-connector name="jmsConnectorLimitedRedelivery"
                            maxRedelivery="3"
                            disableTemporaryReplyToDestinations="true"/>

    <jms:activemq-connector name="jmsConnectorInfiniteRedelivery"
                            maxRedelivery="-1"
                            disableTemporaryReplyToDestinations="true"/>

    <jms:activemq-connector name="jmsConnectorNoRedelivery"
                            maxRedelivery="0"
                            disableTemporaryReplyToDestinations="true"/>

    <model name="test">
        <service name="Bouncer1">
            <inbound>
                <jms:inbound-endpoint connector-ref="jmsConnectorLimitedRedelivery" queue="in1">
                    <jms:transaction action="ALWAYS_BEGIN"/>
                </jms:inbound-endpoint>
            </inbound>
            <test:component/>
        </service>

        <service name="Bouncer2">
            <inbound>
                <jms:inbound-endpoint  connector-ref="jmsConnectorInfiniteRedelivery" queue="in2">
                    <jms:transaction action="ALWAYS_BEGIN"/>
                </jms:inbound-endpoint>
            </inbound>
            <test:component/>
        </service>

        <service name="Bouncer3">
            <inbound>
                <jms:inbound-endpoint  connector-ref="jmsConnectorNoRedelivery" queue="in3">
                    <jms:transaction action="ALWAYS_BEGIN"/>
                </jms:inbound-endpoint>
            </inbound>
            <test:component/>
        </service>
    </model>
</mule>
