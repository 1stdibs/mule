<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesource.org/schema/mule/core/2.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:activiti="http://www.mulesource.org/schema/mule/activiti/2.2"
    xmlns:vm="http://www.mulesource.org/schema/mule/vm/2.2"
    xsi:schemaLocation="
       http://www.mulesource.org/schema/mule/core/2.2 http://www.mulesource.org/schema/mule/core/2.2/mule.xsd
       http://www.mulesource.org/schema/mule/activiti/2.2 http://www.mulesource.org/schema/mule/activiti/2.2/mule-activiti.xsd
       http://www.mulesource.org/schema/mule/vm/2.2 http://www.mulesource.org/schema/mule/vm/2.2/mule-vm.xsd
       ">

    <vm:connector name="asynchVm" queueEvents="true" />

    <activiti:connector name="actServer"
        activitiServerURL="http://localhost:8080/activiti-rest/service/"
        username="kermit" password="kermit" />

    <model>
        <service name="Activiti service">
            <inbound>
                <activiti:inbound-endpoint activiti-server="actServer">
                    <activiti:list-candidate-tasks user="kermit" />
                </activiti:inbound-endpoint>
            </inbound>
            <component class="org.mule.transport.activiti.SelectTaskComponent" />
            <outbound>
                <multicasting-router>
                    <vm:outbound-endpoint path="out" connector-ref="asynchVm" />
                    <activiti:outbound-endpoint activiti-server="actServer" >
                        <activiti:perform-task-operation operation="CLAIM" />
                    </activiti:outbound-endpoint>
                </multicasting-router>
            </outbound>
        </service>
    </model>

</mule>