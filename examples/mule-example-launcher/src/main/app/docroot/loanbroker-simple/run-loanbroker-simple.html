<script type="text/javascript">

var urlPrefix = "http://localhost:11081/";

function doGetLoanBrokerSimple() {
    var data = new Object();
    data.url = urlPrefix + '?amount=' + escape(document.loanBrokerSimpleForm.amount.value);
    data.method = 'GET';
    mule.rpc("/examples/ajaxproxy", data, rpcGetLoanBrokerSimpleResponse);
}

function rpcGetLoanBrokerSimpleResponse(message) {
	$("#response-output").html(getJsonResponse(message.data));

}

</script>
<p class="example-title">Running the example</p>
<p class="example-strong-text">Instructions:</p>
<p class="example-text">Enter the preferred amount and press <b>Execute</b>.</p>

<form name="loanBrokerSimpleForm" id="loanBrokerSimpleForm" action="">
	<table cellspacing="2px" cellpadding="1px" border="0">
	<tr>
	    <td align="right" class="formLabel" valign="middle">Enter Amount:</td>
	    <td nowrap="nowrap" valign="middle">
		    <input type="text" name="amount" value="100">
	    </td>
	    <td valign="middle"><input type="button" value="Execute" onclick="doGetLoanBrokerSimple();"></td>
	</tr>
	</table>
</form>

<p class="example-text"><b>Response:</b></p>
<div id="response-output" class='response'></div>

<p class="example-title">Additional Information</p>
<p class="example-text">
You can also consume this service by directly calling the HTTP endpoint:
<ol class="example-text">
<li>Go to the following URI in your browser to send a loan request (there are some default request values built-in): http://localhost:11081/</li>
<li>You should get a response with the name of the bank providing the best deal and  its interest rate. There are some default request values built-in for this demo.</li>
<li>Now, modify the loan amount requested, and see different banks responding based on the amount: http://localhost:11081/?amount=100</li>
<li>Try different amounts (100, 10000, 20000). Also try invalid numbers to see the error handling in action</li>
</ol>
</p>
<p class="example-text">    
    Complete documentation for this example can be found <a
    href="http://www.mulesoft.org/documentation/display/MULE3INTRO/Loan+Broker+Example"
    target="_blank">here</a>.
</p>


