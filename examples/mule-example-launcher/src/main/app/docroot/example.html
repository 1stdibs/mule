<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>Mule ESB - Examples</title>

    <link rel="icon" href="/images/favicon.ico" type="image/x-icon"/>

    <link type="text/css" href="css/smoothness/jquery-ui-1.8.6.custom.css" rel="stylesheet" />    
    <link type="text/css" href="css/style.css" rel="stylesheet" media="all"/>
    <link type="text/css" href="css/prettify.css" rel="stylesheet" media="all"/>

    <script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.6.custom.min.js"></script>
    <script type="text/javascript" src="js/prettify.js"></script>

    <!-- stripped down version of dojo that just includes the peices necessary for cometd -->
    <script type="text/javascript" src="mule-resource/js/dojo/dojo.js"></script>
    <script type="text/javascript" src="mule-resource/js/_mule.js"></script>

    <script type="text/javascript">

    $.ajaxSetup({
          timeout: 1000,
          async: false,
    });

    $(function() {
        $("#tabs").tabs();
    });

    function displayMenu()
    {
        jQuery.get('/examples/menu.html', 'script',
            function(data, textStatus, xmlHttpRequest)
            {
                $("#examples-menu").html(data);
            });
    }

    function getUrlVars()
    {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');

        for(var i = 0; i < hashes.length; i++)
        {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = unescape(hash[1]);
        }

        return vars;
    }

    function getCheckedValue(radioObj) {
        if(!radioObj)
            return "";
        var radioLength = radioObj.length;
        if(radioLength == undefined)
            if(radioObj.checked)
                return radioObj.value;
            else
                return "";
        for(var i = 0; i < radioLength; i++) {
            if(radioObj[i].checked) {
                return radioObj[i].value;
            }
        }
        return "";
    }

    function doAjaxRequest(url, targetId)
    {
        jQuery.post(url, 'script',
                function(data, textStatus, xmlHttpRequest)
                {
                    $("#" + targetId).html(data);
                }, 'text');
        return true;
    }

    function getRemoteResource(exampleName, resourceName, handlerFunction)
    {
        jQuery.get('/examples/' + exampleName + '/' + resourceName, 'script', handlerFunction, 'text');
    }

    function handleExampleOverviewResponse(data, textStatus, xmlHttpRequest)
    {
        $("#overview-tab").html('<div style="height:450px;width:100%;overflow:scroll;">' + data + '</div>');
    }

    function handleExampleDemoResponse(data, textStatus, xmlHttpRequest)
    {
        $("#runit-tab").html('<div style="height:450px;width:100%;overflow:scroll;">' + data + '</div>');
    }

    function setExampleOverView(exampleName)
    {
        getRemoteResource(exampleName, 'about-' + exampleName + '.html', handleExampleOverviewResponse);
    }

    function setExampleSource(exampleName)
    {
        getRemoteResource(exampleName, 'mule-config.xml', handleExampleSourceResponse);
    }

    function html2entity(str)
    {
        return str.replace(/[<>]/g,
            function(s){return (s == "<")? "&lt;" :"&gt;"});
    }

    function handleExampleSourceResponse(data, textStatus, xmlHttpRequest)
    {
        $("#src-tab").html('<div style="height:450px;width:100%;overflow:scroll;"><pre class="prettyprint">' + html2entity(data) + '</pre></div>');
        prettyPrint();
    }

    function setExampleDemo(exampleName)
    {
        getRemoteResource(exampleName, 'run-' + exampleName + '.html', handleExampleDemoResponse);
    }

    function selectExample(exampleName, exampleTitle)
    {
        $("#example-title").html(exampleTitle);
        setExampleOverView(exampleName);
        setExampleSource(exampleName);
        setExampleDemo(exampleName);
    }

    function initExamples()
    {
        var urlVars = getUrlVars();
        var exampleName = urlVars['exampleName'];
        var exampleTitle = urlVars['exampleTitle'];
        displayMenu();
        selectExample(exampleName, exampleTitle);
    }

    function getJsonResponse(data)
    {
        if(data)
        {
            var obj = jQuery.parseJSON(data);
            return obj.response;
        }
        return data;
    }
    </script>

</head>

<body id="demos" onload="javascript:initExamples();">
<!--[if IE 5]>
<div id="ie5" class="ie"><![endif]-->
<!--[if IE 6]>
<div id="ie6" class="ie"><![endif]-->
<!--[if IE 7]>
<div id="ie7" class="ie"><![endif]-->

<!-- START WRAPPER -->
<div id="wrapper">
    <!-- START HEADER -->
    <div id='banner'>
        <!-- Including common header -->
        <!--<script type="text/javascript" src="scripts/header.js"/>-->
        <h1 class="logo">
            <a href="index.html" title="MuleSoft"><span>MuleSoft</span></a>
        </h1>

        <div id="dock">

        </div>
    </div>
    <!-- END HEADER -->

    <!-- START BODY -->
    <div id="content-wrapper">
        <!-- START CONTENT -->
        <div id="content">
            <div class="content-top"></div>
            <div class="content">
                <div class="content-body">
                    <table cellspacing="0" cellpadding="0" class="layout-grid">
                        <tr>
                            <td>


                                <table class="layout-grid" cellspacing="0" cellpadding="0">
                                    <tr>
                                        <!-- START MENU -->
                                        <td class="left-nav">
                                            <div id='examples-menu'></div>
                                        </td>
                                        <!-- END MENU -->

                                        <!-- START CONTENT PANEL -->
                                        <td class="normal">
                                            <div id="examples-content-panel">

                                                <div id="demo-header">
                                                    <h2>Mule Examples Catalog</h2>
                                                    <h4><span id="example-title"></span></h4>
                                                </div>
                                                <div style="position: absolute; right: 27px" id="switcher"></div>
                                                <div id="demo-config">
                                                    <div id="demo-frame-wrapper">
                                                        <div id="demo-frame">
                                                            <div class="demo">
                                                                <div id="tabs">
                                                                    <ul>
                                                                        <li><a href="#overview-tab">Overview</a></li>
                                                                        <li><a href="#src-tab">Source</a></li>
                                                                        <li><a href="#runit-tab">Run it</a></li>
                                                                    </ul>
                                                                    <!-- OVERVIEW TAB -->
                                                                    <div id="overview-tab">

                                                                    </div>

                                                                    <!-- SRC TAB -->
                                                                    <div id="src-tab">
                                                                    </div>

                                                                    <!-- RUN IT TAB -->
                                                                    <div id="runit-tab">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                    </div>
                                                </div>
                                                </div>
                                                <div id="demo-config-menu">
                                                </div>


                                            </div>
                                        </td>
                                        <!-- END CONTENT PANEL -->
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <!-- END CONTENT -->
    </div>
    <!-- END BODY -->
    <!-- START FOOTER -->
    <div id="footer">
        <div class="bg"></div>
        <div class="inner">
            <ul>
                <li><a href="http://www.mulesoft.org/documentation/display/MULE3INTRO/Home">Documentation</a></li>
                <li><a href="http://forums.mulesoft.org/index.jspa">Forums</a></li>
                <li><a href="mailto:info@mulesoft.com">Email Us</a></li>
            </ul>
        </div>
    </div>
    <!-- END FOOTER -->
<!-- END WRAPPER -->
</div>
<!--[if lte IE 7]></div><![endif]-->

</body>

</html>
