<script type="text/javascript">

var urlPrefix = "http://localhost:47493/change-machine";

function doChangeMachine() {
    var data = new Object();
    data.url = urlPrefix + '?amount=' + document.changeMachineForm.amount.value + '&currency=' + getCheckedValue(document.changeMachineForm.currency);
    data.method = 'GET';
    mule.rpc("/examples/ajaxproxy", data, rpcChangeMachineResponse);
}

function rpcChangeMachineResponse(message) {
	$("#response-output").html(getJsonResponse(message.data));

}

</script>
<p><b>Instructions:</b></p>
<p>Select a currency, enter an amount and press <b>Get Change</b>.</p>

<form name="changeMachineForm" id="changeMachineForm" action="">
	<table cellspacing="2px" cellpadding="1px" border="0">
	<tr>
	    <td align="right" class="formLabel" valign="middle">Currency:</td>
	    <td nowrap="nowrap" valign="middle">
	        <input type="radio" name="currency" value="USD" checked="checked"/> USD
	        <input type="radio" name="currency" value="GBP"/> GBP
	    </td>
	    <td align="right" class="formLabel" valign="middle">Amount:</td>
	    <td nowrap="nowrap" valign="middle">
	        <input type="text" id="amount" name="amount">
	    </td>
	    <td valign="middle"><input type="button" value="Get Change" onclick="doChangeMachine();"></td>
	</tr>
	</table>
</form>

<p><b>Response:</b></p>
<div id="response-output" class='response'></div>

<p><b>Additional Information:</b></p>
<p>
You can also consume this service by directly calling the HTTP endpoint, opening a URL such as <a
    href="http://localhost:47493/change-machine?amount=2.42&currency=USD"
    target="_blank">http://localhost:47493/change-machine?amount=2.42&currency=USD</a>, replacing "USD" with "GBP" and the amount with a decimal number.
</p>
<p>    
    Complete documentation for this example can be found <a
    href="http://www.mulesoft.org/documentation/display/MULE3INTRO/Scripting+Example"
    target="_blank">here</a>.
</p>